{% extends "package_base.html" %}

{% block title %} Result detail / '{{ package }}' {% endblock %}

{% block content %}

<h2>Result detail</h2>

<i><a href='inspect?result_key={{ qp(key) }}'>inspect raw record</a></i>

<p>

Package: {{ client_info['package'] }}<br>
Host: {{ client_info['host'] }} ({{ receipt['client_ip'] }})<br>
Architecture: {{client_info['arch'] }}<br>

<p>

<b>
Status: 
 {% if client_info['success'] -%}
   <font color='green'>SUCCESS</font>
 {% else %}
   <font color='red'>FAILURE</font>
 {% endif %}
</b>

<p>
Timestamp: {{ timestamp }}
<p>

Build steps:
<ol>
{% for r in results %}
   <li> <a href='#{{ loop.index0 }}'>{{ loop.index }}. {{ r['type'] }}; {{ r['name'] }};
   {% if r['status'] == 0 %}
      <font color="green">success</font>
   {% else %}
      <font color="red">failure ({{ r['status'] }})</font>
   {% endif %}
   </a>
{% endfor %}
</ol>

<h2>Details</h2>
<ul>
{% for r in results %}
   <hr>
   <li> <a name='{{ loop.index0 }}'>{{ loop.index }}. 
   <b>{{ r['name'] }}</b> {{ r['type'] }} -
   {% if r['status'] == 0 %}
      <font color="green">success</font>
   {% else %}
      <font color="red">failure ({{ r['status'] }})</font>
   {% endif %}

   <p>
   
   <b>command line:</b>{{ r['command'] }}
   <p>
   <b>stdout:</b><blockquote><pre>{{ r['output'] }}</pre></blockquote>
   
   {% if r['errout'].strip() %}
   <b>stderr:</b><pre><blockquote>{{ r['errout'] }}</pre></blockquote>
   {% else %}
   <i>no stderr</i>
   {% endif %}
   <p>
{% endfor %}
</ul>

{% endblock %}
