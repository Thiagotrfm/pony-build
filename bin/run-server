#! /usr/bin/env python
import sys
import _mypath
from pony_build import server, simple_app
import shelve

HOST=''
PORT=int(sys.argv[2])

try:
    dbfile = shelve.open(sys.argv[1])
except IOError:
    dbfile = shelve.open(sys.argv[1], 'c')

app = simple_app.SimpleApp(db=dbfile)

server = server.create(HOST, PORT, app)

try:
    print 'serving on http://%s:%d/xmlrpc' % (HOST, PORT)
    server.serve_forever()
except KeyboardInterrupt:
    print 'exiting'
